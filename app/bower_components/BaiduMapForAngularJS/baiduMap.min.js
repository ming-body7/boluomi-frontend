!function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(window,function(e){"use strict";var t=function(e,t){if(!e)throw new Error(t)},n=function(e,t){for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n])},o=function(){return{restrict:"E",scope:{options:"="},link:function(e,o,r){var i={navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,zoom:10},a=e.options;n(a,i),t(a.center,"options.center must be set"),t(a.center.longitude,"options.center.longitude must be set"),t(a.center.latitude,"options.center.latitude must be set"),t(a.city,"options.city must be set");var l=new BMap.Map(o.find("div")[0]);if(l.centerAndZoom(new BMap.Point(a.center.longitude,a.center.latitude),a.zoom),a.navCtrl&&l.addControl(new BMap.NavigationControl),a.scaleCtrl&&l.addControl(new BMap.ScaleControl),a.overviewCtrl&&l.addControl(new BMap.OverviewMapControl),a.enableScrollWheelZoom&&l.enableScrollWheelZoom(),l.setCurrentCity(a.city),a.markers){var c=[],d=function(e){return function(){this.openInfoWindow(e)}},s=function(){var e=0;for(e=0;e<c.length;e++)c[e].removeEventListener("click",d(i)),l.removeOverlay(c[e]);for(c.length=0,e=0;e<a.markers.length;e++){var t,n=a.markers[e],o=new BMap.Point(n.longitude,n.latitude);if(n.icon){var r=new BMap.Icon(n.icon,new BMap.Size(n.width,n.height));t=new BMap.Marker(o,{icon:r})}else t=new BMap.Marker(o);if(l.addOverlay(t),c.push(t),!n.title&&!n.content)return;var i=new BMap.InfoWindow("<p>"+(n.title?n.title:"")+"</p><p>"+(n.content?n.content:"")+"</p>",{enableMessage:!!n.enableMessage});t.addEventListener("click",d(i))}};s(),e.$watch("options.center",function(t,n){a=e.options,l.centerAndZoom(new BMap.Point(a.center.longitude,a.center.latitude),a.zoom),s()},!0),e.$watch("options.markers",function(e,t){s()},!0)}},template:'<div style="width: 100%; height: 100%;"></div>'}},r=e.module("baiduMap",[]);r.directive("baiduMap",[o])});