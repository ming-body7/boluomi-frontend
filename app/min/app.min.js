!function(){"use strict";function e(e,r,t){var n;n=angular.copy(Config),window.App=n,t.defaults.withCredentials=!0,r.rule(function(e,r){var t=r.path(),n="/"===t[t.length-1];if(n){var o=t.substr(0,t.length-1);return o}}),r.otherwise(function(e){var r=e.get("$state");r.go("index")}),e.state("index",{url:"/index",templateUrl:"controllers/index/index.view.html",controller:"indexController",data:{permissions:{except:[]}}}).state("brand",{url:"/brand",templateUrl:"controllers/brand/brand.view.html",controller:"brandController",data:{permissions:{only:["user.brand"],redirectTo:"index"}}}).state("audit",{url:"/audit",templateUrl:"controllers/audit/audit.view.html",controller:"auditController",data:{permissions:{only:["user.audit"],redirectTo:"index"}}}).state("login",{url:"/login",templateUrl:"controllers/login/login.view.html",controller:"loginController",data:{permissions:{except:[]}}}).state("register",{url:"/register",templateUrl:"controllers/register/register.view.html",controller:"registerController",data:{permissions:{except:[]}}}).state("main",{url:"/main","abstract":!0,templateUrl:"controllers/main/main.view.html",controller:"mainController",data:{permissions:{only:["user"],redirectTo:"index"}}}).state("preview",{url:"/preview/{pid}",templateUrl:"controllers/preview/preview.view.html",controller:"previewController",data:{permissions:{only:["user","admin"],redirectTo:"index"}}}).state("admin",{url:"/admin","abstract":!0,templateUrl:"controllers/admin/main/adminMain.view.html",data:{permissions:{only:["admin"],redirectTo:"admin_login"}}}).state("admin_login",{url:"/admin/login",templateUrl:"controllers/admin/login/login.view.html",controller:"adminLoginController",data:{permissions:{except:[]}}})}function r(e,r,t,n,o){e.globals=r.get("globals")||{},null!=e.globals&&"user"==e.globals.role&&n.setAccessLevel("user"),e.$on("$stateChangeStart",function(e,r,t,n,i){"main.content.create"==n.name||"main.content.create"==n.name,r.redirectTo&&(e.preventDefault(),o.go(r.redirectTo,t))}),e.$on("$stateChangeSuccess",function(e,t,n,o,i){var l={toStateName:t.name,toParams:n,time:new Date};"index"!=l.toStateName&&r.put("currentState",JSON.stringify(l))}),t.defineRole("anonymous",function(r){var t=e.globals.role;return"anonymous"==t}).defineRole("user",function(r){var t=e.globals.role;return"user"==t}).defineRole("user.brand",function(r){var t=e.globals.role;return"user.brand"==t}).defineRole("user.audit",function(r){var t=e.globals.role;return"user.audit"==t}).defineRole("admin",function(r){var t=e.globals.role;return"admin"==t})}angular.module("myApp",["myApp.directive","myApp.content","myApp.admin","ngMessages","ngFileUpload","ui.router","ui.bootstrap","ngAnimate","baiduMap","progressButton","ngCookies","baiduMap","monospaced.qrcode","permission","angular-sortable-view"]).config(e).run(r),e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"],r.$inject=["$rootScope","$cookieStore","Permission","UserService","$state"]}();